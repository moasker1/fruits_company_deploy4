{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{% static "css/main.css" %}">
    <title>تعديل عملية بيع</title>
</head>

<body>
    {% if user.first_name == "شبه مسئول" or user.username == 'محمدبعجر' or user.username == 'm' %}
    
    <header>
        <div class="main">
            <img src="{% static "images/logo.png" %}" alt="">
            <h1>تعديـــــــل عملية بيع للبائع ({{sale.seller.name}})</h1>
        </div>
        <a href="#" onclick="goBack()"><i class="fa-solid fa-arrow-left"></i></a>
    </header>
    
    
    <form method="POST" class="sellcon" action="{% url 'saleupdate' id=sale.id %}">
        {% csrf_token %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
        <input name='seller' type="text" value="{{ sale.seller.name }}" readonly required oninvalid="this.setCustomValidity('يرجى ادخال اسم البائع')">
        <select name="container_item" id="container_item">
            {% for item in sale.container.containeritem_set.all %}
                <option value="{{ item.item.name }}" data-price="{{ item.price }}">{{ item.item.name }}</option>
            {% endfor %}
        </select>
        <input type="hidden" name="container_id" value="{{ sale.container.id }}">
        <input type="hidden" name="sale_id" value="{{ sale.id }}">
        <div class="inputBox">
            <input name="count" type="number" value="{{ sale.count }}" min="1" required oninvalid="this.setCustomValidity('يرجى ادخال العدد')">
            <span>العدد</span>
        </div>
        <div class="inputBox">
            <input name="weight" type="number" step="0.01" value="{{ sale.weight }}" min="0" required oninvalid="this.setCustomValidity('يرجى ادخال الوزن')">
            <span>الوزن</span>
        </div>
        <div class="inputBox">
            <input name="price" type="number" step="0.001" value="{{ sale.price }}" min="0" id="priceInput"  required oninvalid="this.setCustomValidity('يرجى ادخال السعر')">
            <span>السعر</span>
        </div>
        <div class="inputBox">
            <input name="dept" type="number" step="0.001" value="{{ sale.dept }}" min="0" id="priceInput"  >
            <span>الرهن</span>
        </div>
        

        <div class="search_res" id="search_res">
                <table>
                    <th></th>
                    <tbody id="suplliersul">
                        {% for seller in sellers %}
                        <tr><td>{{ seller.name }}</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </nav>
        <select name="tool" id="">
            <option value="اخر" {% if sale.tool == 'اخر' %} selected {% endif %}>اخر</option>
            <option value="صناديق كبيرة" {% if sale.tool == 'صناديق كبيرة' %} selected {% endif %}>صناديق كبيرة</option>
            <option value="صناديق صغيرة" {% if sale.tool == 'صناديق صغيرة' %} selected {% endif %}>صناديق صغيرة</option>
        </select>
        <input name='date' type="date" value="{{ sale.date }}" placeholder="المنظقة">
        <input name="dept" type="number" id="deptinp" value="{{ sale.dept }}" placeholder="الرهن">
        <button type="submit">تم</button>
    </form>
    





        {% else %}
        <h1>التعديل غير مفعل</h1>
    {% endif %}

    <script>    
        function goBack() {
            window.history.back();
        }
    </script>

</body>
</html>